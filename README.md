# 리덕스 라이브러리

- 가장 많이 사용하는 리액트 상태 관리 라이브러리
- 컴포넌트 상태 업데이트 관련 로직을 다른 파일로 분리시켜 더욱 효율적으로 관리 가능
- 컴포넌트끼리 똑같은 상태 공유해야 할 때 여러 컴포넌트 거치지 않고 손쉽게 상태 값 전달하거나 업데이트 가능
- 전역 상태 관리할 때 굉장히 효과적 : 코드 유지 보수성 높여줌, 작업 효율 극대화, 편리한 개발자 도구 지원, 미들웨어 기능 제공해 비동기 작업 훨씬 효율적으로 관리 가능

### 액션

- 상태에 어떤 변화 필요하면 액션(action) 발생 -> 하나의 객체로 표현 됨
- 형태 : {type:'TOGGLE_VALUE}
- 액션 객체는 type 필드 반드시 가지고 있어야 함(=액션의 이름), 그 외 값들은 상태 업데이트 시 참고해야 할 값으로 작성자 마음대로 넣을 수 있음

### 액션 생성 함수

- 액션 객체 만들어 주는 함수
- 형태 :

```
  function addTodo(data) {
    return {
        type: 'ADD_TODO',
        data
    }
  }
    <!-- 화살표 함수도 가능 -->

  const changeInput = text => ({
    type: 'CHANGE_INPUT',
    text
  })
```

- 어떤 변화 일으켜야 할 때마다 액션 객체 만들어야 하는데 매번 객체 직접 작성하기 번거로움과 실수할 가능성을 방지하기 위해 함수로 만들어 관리

### 리듀서

- 변화를 일으키는 함수로, 액션 만들어 발생시키면 리듀서가 현재 상태와 전달받은 액션 객체를 파라미터로 받아 오고 두 값을 참고해 새로운 상태 만들어 반환
- 형태 :

```
  const initialState = {
    counter : 1
  };
  function reducer(state = initialState, action) {
    switch (action.type) {
     case INCREMENT:
        return {
            counter : state.counter + 1
        };
    default:
        return state;
    }
  }
```

### 스토어

- 프로젝트에 리덕스 적용하기 위해 스토어(store) 만듦
- 하나의 프로젝트는 단 하나의 스토어만 가질 수 있음
- 스토어 안에는 현재 애플리케이션 상태와 리듀서가 들어가 있으며, 그 외에도 몇가지 중요한 내장 함수 지님

### 디스패치

- 디스패지(dispatch)는 스토어의 내장 함수 중 하나로 '액션을 발생시키는 것'이라고 이해
- dispatch(action)과 같은 형태로 액션 객체를 파라미터로 넣어 호출
- 이 함수가 호출되면 스토어는 리듀서 함수 실행시켜 새로운 상태 만들어 줌

### 구독

- 구독(subscribe)도 스토어의 내장 함수 중 하나
- subscribe 함수 안에 리스너 함수를 파라미터로 넣어소 호출하면, 이 리스너 함수가 액션이 디스패치되어 상태 업데이트 될 때마다 호출됨
- 형태:

```
const listener = () => {
    console.log('상태 업데이트 됨');
}
const unsubscribe = store.subscribe(listener);

unsubscribe();  // 추후 구독 비홯성화 할 때 함수 호출
```

## 리액트 없이 쓰는 리덕스

- 리덕스는 리액트에 종속되는 라이브러리가 아님, 리액트에서 사용하려고 만들어졌지만 다른 UI 라이브러리/프레임워크와 함께 사용 가능
- 바닐라 자바스크립트와 함께 사용 가능

## 리덕스 규칙

1. 단일 스토어 : 하나의 애플리케이션 안에는 하나의 스토어 들어있음, 여러개 스토어 사용하는 것 불가능하지않지만 상태관리 복잡해질 수 있어 권장하지 않음
2. 읽기 전용 상태 : 리덕스 상태는 읽기 전용, 상태 업데이트할 때 기존 객체 건드리지 않고 새로운 객체 생성해 줘야함
   - 내부적으로 데이터 변경되는 것 감지 위해 얕은 비교(shallow equality) 검사하기 때문에 불변성 유지해야 함
3. 순수한 함수 : 변화 일으키는 리듀서 함수는 순수한 함수여야 함
   - 순수한 함수 조건
     - 리듀서 함수는 이전 상태와 액션 객체를 파라미터로 받음
     - 파라미터 외의 값에는 의존하면 안됨
     - 이전 상태는 절대로 건드리지 않고 변화를 준 새로운 상태 객체를 만들어 반환함
     - 똑같은 파라미터로 호출 된 리듀서 함수는 언제나 똑같은 결과 값 반환해야 함
